<%= render(:layout => '/shared/sidebar',
           :locals => {
             :record_type => 'agent',
             :record => @agent,
             :plusone => :submit,
             :save_button_text => I18n.t("#{@agent.agent_type}._frontend.action.save")
           }) do |sidebar| %>

    <% if action_name != "show" %>
      <%= render_aspace_partial :partial => "shared/sidebar_entry", :locals => {:anchor => "record_control_information", :title => "Record Control Information"} %>
    <% end %>


    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_record_identifier', :property => 'agent_record_identifiers', :anchor => "#{@agent.agent_type}_agent_record_identifier") %>


   <% if (AppConfig[:agents_display_full] && AppConfig[:agents_display_full] == true && @full_mode) || action_name == "show" %>
     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_record_control', :property => 'agent_record_controls', :anchor => "#{@agent.agent_type}_agent_record_control") %>

     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_other_agency_code', :property => 'agent_other_agency_codes', :anchor => "#{@agent.agent_type}_agent_other_agency_codes") %>

     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_conventions_declaration', :property => 'agent_conventions_declarations', :anchor => "#{@agent.agent_type}_agent_conventions_declaration") %>

     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_maintenance_history', :property => 'agent_maintenance_histories', :anchor => "#{@agent.agent_type}_agent_maintenance_history") %>

     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_source', :property => 'agent_sources', :anchor => "#{@agent.agent_type}_agent_sources") %>

     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_alternate_set', :property => 'agent_alternate_sets', :anchor => "#{@agent.agent_type}_agent_alternate_set") %>
   <% end %>

    <% if action_name != "show" %>
        <%= render_aspace_partial :partial => "shared/sidebar_entry", :locals => {:anchor => "identity_information", :title => "Identity Information"} %>
    <% end %>

    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_identifier', :property => 'agent_identifiers', :anchor => "#{@agent.agent_type}_agent_identifier") %>

    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_name', :property => 'names', :anchor => "#{@agent.agent_type}_names") %>


    <% if action_name != "show" %>
        <%= render_aspace_partial :partial => "shared/sidebar_entry", :locals => {:anchor => "description_information", :title => "Description Information"} %>
    <% end %>

    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'dates_of_existence', :property => 'dates_of_existence',
                                         :anchor => "#{@agent.agent_type}_dates_of_existence") %>


   <% if (AppConfig[:agents_display_full] && AppConfig[:agents_display_full] == true && @full_mode) || action_name == "show" %>

    <% if @agent.agent_type == "agent_person" %>
        <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_gender', :property => 'agent_genders', :anchor => "agent_person_agent_gender") %>
    <% end %>


    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_place', :property => 'agent_places',
                                         :anchor => "#{@agent.agent_type}_agent_place") %>

      <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_occupation', :property => 'agent_occupations',
                                           :anchor => "#{@agent.agent_type}_agent_occupation") %>
 
      <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_function', :property => 'agent_functions',
                                           :anchor => "#{@agent.agent_type}_agent_function") %>

      <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_topic', :property => 'agent_topics',
                                           :anchor => "#{@agent.agent_type}_agent_topic") %>

      <%= sidebar.render_for_view_and_edit(:subrecord_type => 'used_language', :property => 'used_languages',
                                         :anchor => "#{@agent.agent_type}_used_language") %>

    <% end %>
 
 
    <% if user_can?('view_agent_contact_record') %>
      <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_contact', :property => 'agent_contacts', :anchor => "#{@agent.agent_type}_contact_details") %>
    <% end %>

    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'note', :property => 'notes', :anchor => "#{@agent.agent_type}_notes") %>


    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'external_document', :property => "external_documents", :anchor => "#{@agent.agent_type}_external_documents") %>

    <% if action_name != "show" %>
        <%= render_aspace_partial :partial => "shared/sidebar_entry", :locals => {:anchor => "relation_information", :title => "Relation Information"} %>
    <% end %>
    
   <% if (AppConfig[:agents_display_full] && AppConfig[:agents_display_full] == true && @full_mode) || action_name == "show" %>
     <%= sidebar.render_for_view_and_edit(:subrecord_type => 'agent_resource', :property => 'agent_resources',
                                         :anchor => "#{@agent.agent_type}_agent_resource") %>

   <% end %>

    <%= sidebar.render_for_view_and_edit(:subrecord_type => 'related_agent', :property => 'related_agents', :anchor => "related_agents") %>

    <%= sidebar.render_for_view_only(:subrecord_type => 'search_embedded', :property => :none, :anchor => 'search_embedded') %>
    <% if @agent.agent_type == 'agent_person' %>
      <%= sidebar.render_for_view_only(:title => I18n.t('assessment._frontend.linked_records.linked_via_assessment_surveyed_by'), :subrecord_type => 'assessment', :property => :none, :anchor => 'linked_assessments_surveyed_by') %>
      <%= sidebar.render_for_view_only(:title => I18n.t('assessment._frontend.linked_records.linked_via_assessment_reviewer'), :subrecord_type => 'assessment', :property => :none, :anchor => 'linked_assessments_reviewer') %>
    <% end %>
<% end %>
